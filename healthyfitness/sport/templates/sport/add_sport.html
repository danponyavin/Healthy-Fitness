{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Добавить тренировку</title>
    <link href="{% static 'sport/css/style_add_sport.css' %}" rel="stylesheet">
</head>
<body style="background-image:url('{% static 'sport/img/sport_pattern_red_people.jpg' %}'); background-size: auto;">

<header>
        <div class = container>
            <div class="head">
                <a href="{% url 'home' %}"><img src="{% static 'registration/img/iconLogo.png' %}" alt="" class="logo"></a>
                <nav class="navigation">
                    <ul class="menu">
                        <li class="text">
                            <a href="{% url 'home' %}">Главная</a>
                        </li>

                        <li class="text">
                            <a href="{% url 'articles' %}">Статьи</a>
                        </li>

                        <li class="text">
                            <a href="{% url 'calculator' %}">Калькулятор</a>
                        </li>

                        <li class="text">
                            <a href="{% url 'product_selection' %}">Еда</a>
                        </li>

                        {% if request.user.is_authenticated %}
                            <li class="text">
                                <a href="{% url 'personalArea' %}" style="font-weight: bold">{{ user.username }} | Личный кабинет</a>
                            </li>
                        {% else %}
                            <li class="text">
                                <a href="{% url 'login' %}">Войти</a> | <a href="{% url 'registration_field' %}">Регистрация</a>
                            </li>
                        {% endif %}
                    </ul>
                </nav>
            </div>
        </div>
</header>

<div id="wrapper">

    <div class="leftSide">
            <div onclick="location.href='{% url 'add_water' %}'" class="water"><a href="{% url 'add_water' %}" class="water_but">Трекер воды</a></div>
            <div onclick="location.href='{% url 'search' %}'" class="food"><a href="{% url 'search' %}" class="food_but">Дневник питания</a></div>
            <div onclick="location.href='{% url 'weight_tracker' %}'" class="weightControl"><a href="{% url 'weight_tracker' %}" class="weight_but">Контроль веса</a></div>
            <div onclick="location.href='{% url 'add_sport' %}'" class="sport"><a href="{% url 'add_sport' %}" class="sport_but">Дневник тренировок</a></div>
    </div>


    <div class="rightSide">
        <div class="selectOption">
            <ul>
                <li><a href="{% url 'add_sport' %}" style="font-weight: bold">Добавить тренировку</a></li>
                <li><a href="{% url 'sport_diary' %}" class="diary">Дневник тренировок</a></li>
            </ul>
        </div>

        <div class="rectangle">
            <h3 align="center">Поиск тренировки</h3>
            <center>
                <form action="{% url 'add_sport' %}">
                    <input class="searchProducts" minlength="2" placeholder="Введите название продукта" name="search" value="{{ value }}">
                    <button class="search_button" type="submit">
                        <img src="{% static 'food_diary/img/lupa.png'%}" class="lupa">Искать
                    </button>
                </form>
            </center>
            <center>
                <table class="table_sort">
                    <thead>
                        <tr>
                            <th style="display: none;">id</th>
                            <th>Упражнение</th>
                            <th>Время, мин</th>
                            <th>Ккал</th>
                            <th>Действие</th>
                        </tr>
                    </thead>
                    <form id="form" method="post">
                        {% csrf_token %}
                        <tr>
                            <td style="display: none;"><input name="id" value="{{ i.id }}"></td>
                            <td align="center">Бег</td>
                            <td align="center"><input id="{{ i.id }}" type="number" value="60"></td>
                            <td align="center">600</td>
                            <td align="center">
                                <button name="{{ i.id }}" class="add_button" onclick="getdetails(this)">Добавить</button></td>
                        </tr>
                    </form>
                </table>
            </center>

        </div>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
            const getSort = ({ target }) => {
                const order = (target.dataset.order = -(target.dataset.order || -1));
                const index = [...target.parentNode.cells].indexOf(target);
                const collator = new Intl.Collator(['en', 'ru'], { numeric: true });
                const comparator = (index, order) => (a, b) => order * collator.compare(
                    a.children[index].innerHTML,
                    b.children[index].innerHTML
                );
                for(const tBody of target.closest('table').tBodies)
                    tBody.append(...[...tBody.rows].sort(comparator(index, order)));

                for(const cell of target.parentNode.cells)
                    cell.classList.toggle('sorted', cell === target);
            };
            document.querySelectorAll('.table_sort thead').forEach(tableTH => tableTH.addEventListener('click', () => getSort(event)));
            });
        </script>
        <script>
        function getdetails(clicked_object) {
            let a = clicked_object.getAttribute('name');
            if (document.getElementById(a).value > 0)
                alert("Тренировка успешно записана")
            else
                alert("Некорректно введено время тренировки")
        }
        </script>


    </div>

</div>


</body>
</html>